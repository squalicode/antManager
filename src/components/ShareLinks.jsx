import ReactDomServer from 'react-dom/server';

function ShareLinks({ants, eggs, food, points, secretPoints}) {
  // When the results are announced in the aria-live region, the elements are read without inserting pauses between paragraphs/headings
  // This const is to insert a visually-hidden colon that will make the screen reader pause before reading the next element
  const screenReaderPause = <span aria-label="."></span>;

  const url = 'antmanager.netlify.app';
  const urlFull = `https://${url}/`;

  function writeMessage(mode) {
    let newLine = ' ';
    // New lines and emojis are encoded differently in urls.
    switch (mode) {
      case 'url':
        newLine = 'toReplace';
        break;
      case 'html':
        newLine = <br/>;
        break;
      default:
    }

    const messageObject = <>
      My Ant Manager score:{newLine}{newLine}
      🐜 {ants} ants, 🥚 {eggs} eggs, 🌾 {food} food.{newLine}
      ⭐ {points} points{secretPoints ? ', 🌟 ' + secretPoints + ' secret points' : ''}.{newLine}{newLine}
      Play at {url}
    </>;
  
    return (mode === 'url') ?
      // This generates a String from the HTML object, encodes special characters as a url,
      // and replaces new lines with '%0a' (encodeURI replaces characters in '%0a').
      encodeURI(ReactDomServer.renderToStaticMarkup(messageObject)).replace(/toReplace/g, '%0a')
      : messageObject;
  }

  const messagePreview = writeMessage('html');
  
  const messageUrl = writeMessage('url');

    return (
      <div className="share">
        <h3>Share{screenReaderPause}</h3>
        <blockquote>
          <p>{messagePreview}{screenReaderPause}</p>
        </blockquote>
        
        <ul>
          <li className="twitter">
            <a href={`https://www.twitter.com/share?url=${urlFull}%26text=${messageUrl}`} target="_blank" rel="noreferrer" aria-labelledby="twitter-title">
            <svg aria-hidden="true" viewBox="0 0 512 512">
              <title id="twitter-title">Share on Twitter{screenReaderPause}</title>
<path d="M459.186,151.787c0.203,4.501,0.305,9.023,0.305,13.565 c0,138.542-105.461,298.285-298.274,298.285c-59.209,0-114.322-17.357-160.716-47.104c8.212,0.973,16.546,1.47,25.012,1.47 c49.121,0,94.318-16.759,130.209-44.884c-45.887-0.841-84.596-31.154-97.938-72.804c6.408,1.227,12.968,1.886,19.73,1.886 c9.55,0,18.816-1.287,27.617-3.68c-47.955-9.633-84.1-52.001-84.1-102.795c0-0.446,0-0.882,0.011-1.318 c14.133,7.847,30.294,12.562,47.488,13.109c-28.134-18.796-46.637-50.885-46.637-87.262c0-19.212,5.16-37.218,14.193-52.7 c51.707,63.426,128.941,105.156,216.072,109.536c-1.784-7.675-2.718-15.674-2.718-23.896c0-57.891,46.941-104.832,104.832-104.832 c30.173,0,57.404,12.734,76.525,33.102c23.887-4.694,46.313-13.423,66.569-25.438c-7.827,24.485-24.434,45.025-46.089,58.002 c21.209-2.535,41.426-8.171,60.222-16.505C497.448,118.542,479.666,137.004,459.186,151.787z"> </path>
</svg>
            </a>
          </li>

          <li className="whatsapp">
            <a href={`https://api.whatsapp.com/send?text=${messageUrl}`} target="_blank" rel="noreferrer" aria-labelledby="whatsapp-title">
              <svg aria-hidden="true" viewBox="0 0 512 512">
                  <title id="whatsapp-title">Share on Whatsapp{screenReaderPause}</title>
                  <path d="M414.73,97.1A222.14,222.14,0,0,0,256.94,32C134,32,33.92,131.58,33.87,254A220.61,220.61,0,0,0,63.65,365L32,480l118.25-30.87a223.63,223.63,0,0,0,106.6,27h.09c122.93,0,223-99.59,223.06-222A220.18,220.18,0,0,0,414.73,97.1ZM256.94,438.66h-.08a185.75,185.75,0,0,1-94.36-25.72l-6.77-4L85.56,427.26l18.73-68.09-4.41-7A183.46,183.46,0,0,1,71.53,254c0-101.73,83.21-184.5,185.48-184.5A185,185,0,0,1,442.34,254.14C442.3,355.88,359.13,438.66,256.94,438.66ZM358.63,300.47c-5.57-2.78-33-16.2-38.08-18.05s-8.83-2.78-12.54,2.78-14.4,18-17.65,21.75-6.5,4.16-12.07,1.38-23.54-8.63-44.83-27.53c-16.57-14.71-27.75-32.87-31-38.42s-.35-8.56,2.44-11.32c2.51-2.49,5.57-6.48,8.36-9.72s3.72-5.56,5.57-9.26.93-6.94-.46-9.71-12.54-30.08-17.18-41.19c-4.53-10.82-9.12-9.35-12.54-9.52-3.25-.16-7-.2-10.69-.2a20.53,20.53,0,0,0-14.86,6.94c-5.11,5.56-19.51,19-19.51,46.28s20,53.68,22.76,57.38,39.3,59.73,95.21,83.76a323.11,323.11,0,0,0,31.78,11.68c13.35,4.22,25.5,3.63,35.1,2.2,10.71-1.59,33-13.42,37.63-26.38s4.64-24.06,3.25-26.37S364.21,303.24,358.63,300.47Z" fillRule="evenodd"/>
                </svg>
            </a>
          </li>

          <li className="telegram">
            <a href={`https://t.me/share/?url=${urlFull}%26text=${messageUrl}`} target="_blank" rel="noreferrer" aria-labelledby="telegram-title">
              <svg aria-hidden="true" viewBox="-1.12 -1.12 18.24 18.24" strokeWidth="0">
                  <title id="telegram-title">Share on Telegram{screenReaderPause}</title>
                  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"/></svg>
            </a>
          </li>

          <li className="reddit">
            <a href={`https://www.reddit.com/submit?url=${urlFull}%26title=My%20Ant%20Manager%20score%26text=${messageUrl}`} target="_blank" rel="noreferrer" aria-labelledby="reddit-title">
              <svg aria-hidden="true" viewBox="0 -4 48 48">
                <title id="reddit-title">Share on Reddit{screenReaderPause}</title>
                <path transform="translate(-800.000000, -566.000000)" fillRule="evenodd" d="M831.14,592.325803 C829.346,592.325803 827.8385,590.884067 827.8385,589.106421 C827.8385,587.328775 829.346,585.839477 831.14,585.839477 C832.934,585.839477 834.389,587.328775 834.389,589.106421 C834.389,590.884067 832.934,592.325803 831.14,592.325803 M831.902,598.574316 C830.231,600.228597 827.654,601.032699 824.024,601.032699 C824.0165,601.032699 824.0075,601.031213 823.9985,601.031213 C823.991,601.031213 823.982,601.032699 823.973,601.032699 C820.343,601.032699 817.7675,600.228597 816.098,598.574316 C815.585,598.065993 815.585,597.244055 816.098,596.737218 C816.6095,596.23038 817.439,596.23038 817.952,596.737218 C819.104,597.878716 821.0735,598.434602 823.973,598.434602 C823.982,598.434602 823.991,598.436088 823.9985,598.436088 C824.0075,598.436088 824.0165,598.434602 824.024,598.434602 C826.9235,598.434602 828.8945,597.878716 830.048,596.737218 C830.561,596.228894 831.3905,596.23038 831.902,596.737218 C832.4135,597.245541 832.4135,598.067479 831.902,598.574316 M813.611,589.106421 C813.611,587.330262 815.1155,585.839477 816.908,585.839477 C818.702,585.839477 820.157,587.330262 820.157,589.106421 C820.157,590.884067 818.702,592.325803 816.908,592.325803 C815.1155,592.325803 813.611,590.884067 813.611,589.106421 M839.996,568.598098 C841.211,568.598098 842.1995,569.577586 842.1995,570.780024 C842.1995,571.983948 841.211,572.963436 839.996,572.963436 C838.781,572.963436 837.7925,571.983948 837.7925,570.780024 C837.7925,569.577586 838.781,568.598098 839.996,568.598098 M848,585.570452 C848,582.417955 845.4125,579.854043 842.231,579.854043 C840.854,579.854043 839.5895,580.335612 838.5965,581.136742 C835.079,578.945898 830.615,577.62604 825.83,577.346611 L828.326,569.527051 L835.1855,571.127824 C835.3655,573.602556 837.4535,575.561534 839.996,575.561534 C842.6555,575.561534 844.82,573.416766 844.82,570.780024 C844.82,568.144768 842.6555,566 839.996,566 C838.136,566 836.519,567.049346 835.7135,568.581748 L827.7425,566.722354 C827.075,566.56629 826.4,566.94679 826.193,567.594828 L823.094,577.300535 C817.9385,577.425386 813.092,578.749703 809.3165,581.068371 C808.337,580.308859 807.1055,579.854043 805.769,579.854043 C802.5875,579.854043 800,582.417955 800,585.570452 C800,587.519025 800.99,589.241677 802.4975,590.273187 C802.4345,590.726516 802.4015,591.182818 802.4015,591.645065 C802.4015,595.585315 804.713,599.250595 808.91,601.964625 C812.933,604.567182 818.258,606 823.9025,606 C829.547,606 834.872,604.567182 838.895,601.964625 C843.092,599.250595 845.4035,595.585315 845.4035,591.645065 C845.4035,591.224435 845.375,590.806778 845.3225,590.392093 C846.9305,589.376932 848,587.594828 848,585.570452">
                </path>
              </svg>
            </a>
          </li>

          <li className="facebook">
            <a href={`https://www.facebook.com/sharer/sharer.php?u=${urlFull}`} target="_blank" rel="noreferrer" aria-labelledby="facebook-title">
              <svg aria-hidden="true" viewBox="0 0 24 24">
                <title id="facebook-title">Share on Facebook{screenReaderPause}</title>
                <path d="M12 2.03998C6.5 2.03998 2 6.52998 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.84998C10.44 7.33998 11.93 5.95998 14.22 5.95998C15.31 5.95998 16.45 6.14998 16.45 6.14998V8.61998H15.19C13.95 8.61998 13.56 9.38998 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96C15.9164 21.5878 18.0622 20.3855 19.6099 18.57C21.1576 16.7546 22.0054 14.4456 22 12.06C22 6.52998 17.5 2.03998 12 2.03998Z"></path>
                </svg>
            </a>
          </li>

          <li className="copy">
            <button onClick={() => {navigator.clipboard.writeText(ReactDomServer.renderToStaticMarkup(writeMessage()))}} aria-labelledby="copy-title">
            <svg aria-hidden="true" viewBox="0 0 24 24" fill="none">
              <title id="copy-title">Copy to clipboard{screenReaderPause}</title>
              <path d="M9 9V6.2002C9 5.08009 9 4.51962 9.21799 4.0918C9.40973 3.71547 9.71547 3.40973 10.0918 3.21799C10.5196 3 11.0801 3 12.2002 3H17.8002C18.9203 3 19.4801 3 19.9079 3.21799C20.2842 3.40973 20.5905 3.71547 20.7822 4.0918C21.0002 4.51962 21.0002 5.07967 21.0002 6.19978V11.7998C21.0002 12.9199 21.0002 13.48 20.7822 13.9078C20.5905 14.2841 20.2839 14.5905 19.9076 14.7822C19.4802 15 18.921 15 17.8031 15H15M9 9H6.2002C5.08009 9 4.51962 9 4.0918 9.21799C3.71547 9.40973 3.40973 9.71547 3.21799 10.0918C3 10.5196 3 11.0801 3 12.2002V17.8002C3 18.9203 3 19.4801 3.21799 19.9079C3.40973 20.2842 3.71547 20.5905 4.0918 20.7822C4.5192 21 5.07899 21 6.19691 21H11.8036C12.9215 21 13.4805 21 13.9079 20.7822C14.2842 20.5905 14.5905 20.2839 14.7822 19.9076C15 19.4802 15 18.921 15 17.8031V15M9 9H11.8002C12.9203 9 13.4801 9 13.9079 9.21799C14.2842 9.40973 14.5905 9.71547 14.7822 10.0918C15 10.5192 15 11.079 15 12.1969L15 15"></path>
            </svg>
            </button>
          </li>
        </ul>
      </div>
    );
  }
  
export default ShareLinks;